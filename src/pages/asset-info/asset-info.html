<ion-header>
  <ion-navbar no-border-bottom color="headerColor">
    <ion-title>
      {{'Asset Details'|translate}}
    </ion-title>
  </ion-navbar>

  <ion-toolbar no-border-top style="padding: 0px; min-height: 0px;">
    <ion-segment [(ngModel)]="pet">
      <ion-segment-button value="puppies">
        {{'Asset Info'|translate}}
      </ion-segment-button>
      <ion-segment-button value="kittens">
        {{'Evidence'|translate}}
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div [ngSwitch]="pet">
    <ion-list *ngSwitchCase="'puppies'">
      <ion-item>
        <ion-label floating>{{'Asset Name *'|translate}}</ion-label>
        <ion-input type="text" [(ngModel)]="asset.name" text-capitalize></ion-input>
      </ion-item>
      <ion-list>
        <ion-label style="margin-bottom: 0px;margin-left: 16px; opacity: .4; ">
          {{'Asset category'|translate}}
        </ion-label>
        <ion-item>
          <ion-input type="text" [(ngModel)]="asset.category.level1 || asset.category" text-capitalize
                     disabled></ion-input>
          <button ion-button clear item-end>{{'Level 1'|translate}}</button>
        </ion-item>
        <ion-item *ngIf="asset.category.level2">
          <ion-input type="text" [(ngModel)]="asset.category.level2" text-capitalize disabled></ion-input>
          <button ion-button clear item-end>{{'Level 2'|translate}}</button>
        </ion-item>
        <ion-item *ngIf="asset.category.level3">
          <ion-input type="text" [(ngModel)]="asset.category.level3" text-capitalize disabled></ion-input>
          <button ion-button clear item-end>{{'Level 3'|translate}}</button>
        </ion-item>
        <ion-item *ngIf="asset.category.level4">
          <ion-input type="text" [(ngModel)]="asset.category.level4" text-capitalize disabled></ion-input>
          <button ion-button clear item-end>{{'Level 4'|translate}}</button>
        </ion-item>
        <ion-item *ngIf="asset.category.level5">
          <ion-input type="text" [(ngModel)]="asset.category.level5" text-capitalize disabled></ion-input>
          <button ion-button clear item-end>{{'Level 5'|translate}}</button>
        </ion-item>
      </ion-list>
      <ion-item>
        <ion-label floating>{{'Input Details *'|translate}}</ion-label>
        <ion-input type="text" [(ngModel)]="asset.inputDetails" text-capitalize name="name" required></ion-input>
      </ion-item>
      <ion-item>
        <ion-label floating>{{'Expected harvest amount *'|translate}}</ion-label>
        <ion-input type="number" [(ngModel)]="asset.expectedHarvestAmount" text-capitalize name="currency"
                   required></ion-input>
      </ion-item>
      <ion-item>
        <ion-label floating>{{'Expected harvest date'|translate}}</ion-label>
        <ion-datetime displayFormat="MMM DD, YYYY" pickerFormat="MMM DD, YYYY" max="2100-10-31" [(ngModel)]="asset.expectedHarvestDate"></ion-datetime>
      </ion-item>
      <ion-item>
        <ion-label floating>{{'Asset Status'|translate}}</ion-label>
        <ion-input type="text" [(ngModel)]="asset.status" text-capitalize disabled></ion-input>
      </ion-item>

      <ion-grid>
        <ion-row>
          <!--<ion-col>
            <button ion-button clear style="color: crimson; letter-spacing: 2px;" (click)="uploadPage()">
              +&nbsp; {{'Add Evidence'|translate}}
            </button>
          </ion-col>-->
          <ion-col text-right>
            <button ion-button color="primary" type="submit" [disabled]="false" (click)="verify()">
              {{registerPromise==='pending'?'Registering' :'Save'|translate}}
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-list>

    <ion-list class="evidence" *ngSwitchCase="'kittens'">

      <ion-row no-padding>
        <ion-col text-right>
          <button ion-button clear style="color: #519a48; letter-spacing: 2px;" (click)="uploadPage()">
            +&nbsp; {{'Add Evidence'|translate}}
          </button>
        </ion-col>
      </ion-row>

      <ion-item-group>
        <ion-item-divider color="secondary">A</ion-item-divider>
        <ion-item>Angola</ion-item>
        <ion-item>Argentina</ion-item>
      </ion-item-group>


      <ion-grid *ngFor="let evidence of asset.evidences">
        <ion-row>
          <ion-col col-6 text-center>
            <img [src]="serverUrl+evidence?.url" style="height: 120px;">
          </ion-col>
          <ion-col col-6 style="border-bottom: 0px solid #dedede;" no-margin>
            <ion-item no-margin class="evidences" style="padding: 0px; border-bottom: 0px solid #dedede; opacity: 0.8; letter-spacing: 0.5px;">
              <h5 style="word-break: break-all;
    white-space: normal;">Lat: {{evidence?.lat}}</h5>
              <h5 style="word-break: break-all;
    white-space: normal;">Long: {{evidence?.long}}</h5>
              <h5 style="border-bottom: 0px solid #dedede;word-break: break-all;
    white-space: normal;">Hash: {{evidence?.hash}}</h5>
              <h5 style="border-bottom: 0px solid #dedede;word-break: break-all;
    white-space: normal;">Date: {{evidence?.date | date: 'mediumDate'}}</h5>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>

    </ion-list>
  </div>
</ion-content>
